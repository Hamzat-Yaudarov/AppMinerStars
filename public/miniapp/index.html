<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mines Stars</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <h1 class="brand-title">Mines Stars</h1>
        <nav class="tab-nav" role="tablist">
          <button class="tab-button is-active" data-tab="profile" aria-selected="true">Профиль</button>
          <button class="tab-button" data-tab="mine">Шахта</button>
          <button class="tab-button" data-tab="shop">Магазин</button>
          <button class="tab-button" data-tab="cases">Кейсы</button>
          <button class="tab-button" data-tab="games">Игры</button>
        </nav>
      </header>
      <main class="content-area">
        <section class="tab-panel is-active" data-panel="profile">
          <div class="profile-card">
            <div class="profile-row">
              <div class="profile-label">Уровень кирки</div>
              <div class="profile-value" id="pickaxe-level">—</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">Звезды</div>
              <div class="profile-value" id="stars-balance">—</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">Mines Coins</div>
              <div class="profile-value" id="mc-balance">—</div>
            </div>
            <div class="inventory-grid">
              <div class="resource-chip"><span>Уголь</span><b id="coal-count">0</b></div>
              <div class="resource-chip"><span>Медь</span><b id="copper-count">0</b></div>
              <div class="resource-chip"><span>Железо</span><b id="iron-count">0</b></div>
              <div class="resource-chip"><span>Золото</span><b id="gold-count">0</b></div>
              <div class="resource-chip"><span>Алмаз</span><b id="diamond-count">0</b></div>
            </div>
          </div>
        </section>
        <section class="tab-panel" data-panel="mine">
          <div class="mine-card">
            <div class="cooldown-box" id="cooldown-box" hidden>
              Копать можно через <span id="cooldown-time">—</span>
            </div>
            <div class="action-row action-row--bottom">
              <button class="primary-action" id="dig-button">Копать</button>
              <button class="secondary-action" id="sell-open">Продать</button>
            </div>
            <div class="drop-feed" id="drop-feed" aria-live="polite"></div>
          </div>
        </section>
        <section class="tab-panel" data-panel="shop">
          <div class="shop-card">
            <div class="profile-row">
              <div class="profile-label">Кирка</div>
              <div class="profile-value" id="shop-pickaxe-level">—</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">Следующий уровень</div>
              <div class="profile-value" id="shop-next-level">—</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">Цена (MC)</div>
              <div class="profile-value" id="shop-cost-mc">—</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">Цена (⭐)</div>
              <div class="profile-value" id="shop-cost-stars">—</div>
            </div>
            <div class="action-row action-row--top">
              <button class="primary-action" id="buy-mc">Купить за MC</button>
              <button class="primary-action" id="buy-stars">Купить за ⭐</button>
            </div>
          </div>
        </section>
        <section class="tab-panel" data-panel="cases">
          <div class="shop-card">
            <h3>Доступные кейсы</h3>
            <div style="display:flex;gap:8px;margin-top:12px;">
              <div class="case-card">
                <div style="font-weight:700">Кейс — 100 ⭐</div>
                <div style="color:var(--muted);margin-top:6px">Шанс: 25⭐ (10%), 50⭐ (25%), 75⭐ (30%), 150⭐ (30%), 300⭐ (5%)</div>
                <button class="primary-action" id="open-cheap" style="margin-top:8px">Открыть</button>
              </div>
              <div class="case-card">
                <div style="font-weight:700">Кейс — 700 ⭐</div>
                <div style="color:var(--muted);margin-top:6px">NFT: Snoop Dogg, Swag Bag, Snoop Cigar, Low Rider</div>
                <button class="primary-action" id="open-premium" style="margin-top:8px">Открыть</button>
              </div>
            </div>
            <div id="case-anim" class="case-anim"></div>
          </div>
        </section>
        <section class="tab-panel" data-panel="games">
          <div class="shop-card">
            <h3>Игра — Лесенка</h3>
            <div class="section-note">Выберите ставку:</div>
            <div class="button-row">
              <button class="primary-action small" data-bet="10">10</button>
              <button class="primary-action small" data-bet="15">15</button>
              <button class="primary-action small" data-bet="25">25</button>
              <button class="primary-action small" data-bet="50">50</button>
              <button class="primary-action small" data-bet="150">150</button>
              <button class="primary-action small" data-bet="250">250</button>
            </div>
            <div class="section-space">Выберите номер (1–8):</div>
            <div class="button-row">
              <button class="secondary-action" data-pick="1">1</button>
              <button class="secondary-action" data-pick="2">2</button>
              <button class="secondary-action" data-pick="3">3</button>
              <button class="secondary-action" data-pick="4">4</button>
              <button class="secondary-action" data-pick="5">5</button>
              <button class="secondary-action" data-pick="6">6</button>
              <button class="secondary-action" data-pick="7">7</button>
              <button class="secondary-action" data-pick="8">8</button>
            </div>
            <div id="ladder-result" style="margin-top:12px"></div>
          </div>
        </section>
      </main>
    </div>

    <!-- Sell modal -->
    <div id="sell-modal" class="modal" hidden>
      <div class="modal-content">
        <button id="sell-close" class="modal-close-btn" aria-label="Закрыть">✕</button>
        <h3>Продать руду</h3>
        <label>Ресурс
          <select id="sell-resource">
            <option value="coal">Уголь</option>
            <option value="copper">Медь</option>
            <option value="iron">Железо</option>
            <option value="gold">Золото</option>
            <option value="diamond">Алмаз</option>
          </select>
        </label>
        <label>Количество (или введите all)
          <input id="sell-amount" placeholder="all или число" />
        </label>
        <div class="modal-actions">
          <button class="secondary-action" id="sell-cancel">Отмена</button>
          <button class="primary-action" id="sell-submit">Продать</button>
        </div>
      </div>
    </div>

    <script type="module" src="./main.js"></script>
  </body>
</html>
